{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Cleveland Tech Survey{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Welcome to the Cleveland Tech Survey!</h1>
    <h4>Total Respondents: {{ num_respondents }}</h4>
</div>
<!-- Nav tabs -->
<ul id="myTab" class="nav nav-tabs" role="tablist">
    {% for id in ids %}
    <li role="presentation"><a href="#{{ id }}-graph" aria-controls="{{ id }}-graph" role="tab" data-toggle="tab">{{ id }}-graph</a></li>
    {% endfor %}
</ul>
<!-- Tab panes -->
<div class="tab-content">
    {% for id in ids %}
    <div role="tabpanel" class="tab-pane" id="{{ id }}-graph">
        <div id="{{ id }}"></div>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
    <!-- D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <!-- Plotly.js -->
    <script src="https://d14fo0winaifog.cloudfront.net/plotly-basic.js"></script>

    <script type="text/javascript">
        var graphs = {{ graphJSON | safe }};
        var ids = {{ ids | safe }};
        for(var id in graphs) {
            Plotly.plot(ids[id],
                graphs[id].data,
                graphs[id].layout || {});
        }
    </script>
{% endblock %}

